"use strict";var Asset=function(n){return n.GetBuildings=function(n){function t(){if($("#Location").val()>0){var t={};t.url=n+"?locationId="+$("#Location").val();t.type="POST";t.data=JSON.stringify({Location:$("#Location").val()});t.datatype="json";t.contentType="application/json";t.success=function(n){$("#Building").empty();$("#Building").append($("<option><\/option>").val(null).html("Please Select"));$("#Room").empty();$("#Room").append($("<option><\/option>").val(null).html("Please Select"));for(var t=0;t<n.length;t++)$("#Building").append($("<option><\/option>").val(n[t].Id).html(n[t].DisplayName))};t.error=function(){console.log("Error in Getting Buildings!!")};$.ajax(t)}else $("#Building").empty(),$("#Building").append($("<option><\/option>").val(null).html("Please Select")),$("#Room").empty(),$("#Room").append($("<option><\/option>").val(null).html("Please Select"))}$("#Location").change(function(){$("#LocationId").val($("#Location").val());$("#BuildingId").val(null);$("#RoomId").val(null);t()})},n.GetRooms=function(n){$("#Building").change(function(){if($("#BuildingId").val($("#Building").val()),$("#RoomId").val(null),$("#Building").val()>0){var t={};t.url=n+"?buildingId="+$("#Building").val();t.type="POST";t.data=JSON.stringify({Building:$("#Building").val()});t.datatype="json";t.contentType="application/json";t.success=function(n){$("#Room").empty();$("#Room").append($("<option><\/option>").val(null).html("Please Select"));for(var t=0;t<n.length;t++)$("#Room").append($("<option><\/option>").val(n[t].Id).html(n[t].DisplayName))};t.error=function(){console.log("Error in Getting Rooms!!")};$.ajax(t)}else $("#Room").empty(),$("#Room").append($("<option><\/option>").val(null).html("Please Select"))})},n.UpdateRoomId=function(){$("#Room").change(function(){$("#RoomId").val($("#Room").val())})},n.UpdateAssignedUserId=function(n){$("#AssignedUser").change(function(){if($("#AssignedUserId").val($("#AssignedUser").val()),$("#ConnectedAsset").val()==null||$("#ConnectedAsset").val().length===0){var i=$("#AssignedUserId").val(),t={};t.url=n+"?userId="+i;t.type="GET";t.datatype="json";t.contentType="application/json";t.success=function(n){n.Id>0?($("#Location").val(n.Id).change(),$("#LocationId").val(n.Id),$("#Building").val(null).change(),$("#BuildingId").val(null),$("#Room").val(null),$("#RoomId").val(null)):($("#Location").val(null).change(),$("#LocationId").val(null),$("#Building").val(null).change(),$("#BuildingId").val(null),$("#Room").val(null),$("#RoomId").val(null),console.log("No Location Found for User!!"))};t.error=function(){console.log("Error Getting User Location!!")};$.ajax(t)}})},n.Status=function(){function n(){$("#AssetStatus option:selected").text()=="Available"||$("#AssetStatus option:selected").text()=="Assigned"||$("#AssetStatus option:selected").text()=="Shared"?$("#AssetTypeName").val()&&$("#AssetTypeName").val()=="Software"?$("#LicenseType").val()&&$("#LicenseType").val()=="User"&&$("#AssetStatus option:selected").text()=="Assigned"?($("#AssignedAsset").val(null),$("#AssignedAssetDiv").hide(),$("#AssignedAsset").prop("disabled",!0),$("#AssignedAsset").selectpicker("refresh"),$("#AssignedUserDiv").show(),$("#AssignedUser").prop("disabled",!1),$("#AssignedUser").selectpicker("refresh")):$("#LicenseType").val()&&$("#LicenseType").val()!="User"&&$("#AssetStatus option:selected").text()=="Shared"?($("#AssignedUserId").val(null),$("#AssignedUser").val(null),$("#AssignedUserDiv").hide(),$("#AssignedUser").prop("disabled",!0),$("#AssignedUser").selectpicker("refresh"),$("#AssignedAssetDiv").show(),$("#AssignedAsset").prop("disabled",!1),$("#AssignedAsset").selectpicker("refresh")):($("#AssignedUserId").val(null),$("#AssignedUser").val(null),$("#AssignedUserDiv").hide(),$("#AssignedUser").prop("disabled",!0),$("#AssignedUser").selectpicker("refresh"),$("#AssignedAsset").val(null),$("#AssignedAssetDiv").hide(),$("#AssignedAsset").prop("disabled",!0),$("#AssignedAsset").selectpicker("refresh")):$("#AssetTypeName").val()&&$("#AssetTypeName").val()=="Hardware"&&($("#Location").attr("required",!0),$("#SurplusDate").attr("required",!1),$("#SNFnumber").attr("required",!1),$("#SurplusDate").val(null),$("#SNFnumber").val(null),$("#SurplusDateDiv").hide(),$("#SNFnumberDiv").hide(),$("#AssetStatus option:selected").text()=="Assigned"?($("#AssignedUserDiv").show(),$("#AssignedUser").prop("disabled",!1),$("#AssignedUser").selectpicker("refresh")):($("#AssetStatus option:selected").text()=="Available"||$("#AssetStatus option:selected").text()=="Shared")&&($("#AssignedUserId").val(null),$("#AssignedUser").val(null),$("#AssignedUserDiv").hide(),$("#AssignedUser").prop("disabled",!0),$("#AssignedUser").selectpicker("refresh")),$("#Category").val()!="Desktop"&&$("#Category").val()!="Laptop"&&$("#Category").val()!="Server"?($("#ConnectedAssetDiv").show(),$("#ConnectedAsset").prop("disabled",!1),$("#ConnectedAsset").selectpicker("refresh")):($("#ConnectedAsset").val(null),$("#ConnectedAssetDiv").hide(),$("#ConnectedAsset").prop("disabled",!0),$("#ConnectedAsset").selectpicker("refresh")),$("#Category").val()=="Desktop"||$("#Category").val()=="Laptop"||$("#Category").val()=="Server"?($("#DrawerDiv").show(),$("#Drawer").prop("disabled",!1)):($("#Drawer").val(null),$("#DrawerDiv").hide(),$("#Drawer").prop("disabled",!0))):$("#AssetStatus option:selected").text()=="Surplus"?($("#Location").attr("required",!1),$("#AssignedUserId").val(null),$("#AssignedUser").val(null),$("#AssignedUserDiv").hide(),$("#AssignedUser").prop("disabled",!0),$("#AssignedUser").selectpicker("refresh"),$("#AssignedAsset").val(null),$("#AssignedAssetDiv").hide(),$("#AssignedAsset").prop("disabled",!0),$("#AssignedAsset").selectpicker("refresh"),$("#ConnectedAsset").val(null),$("#ConnectedAssetDiv").hide(),$("#ConnectedAsset").prop("disabled",!0),$("#ConnectedAsset").selectpicker("refresh"),$("#Drawer").val(null),$("#DrawerDiv").hide(),$("#Drawer").prop("disabled",!0),$("#SurplusDate").attr("required",!0),$("#SNFnumber").attr("required",!0),$("#SurplusDateDiv").show(),$("#SNFnumberDiv").show()):($("#Location").attr("required",!1),$("#AssignedUserId").val(null),$("#AssignedUser").val(null),$("#AssignedUserDiv").hide(),$("#AssignedUser").prop("disabled",!0),$("#AssignedUser").selectpicker("refresh"),$("#AssignedAsset").val(null),$("#AssignedAssetDiv").hide(),$("#AssignedAsset").prop("disabled",!0),$("#AssignedAsset").selectpicker("refresh"),$("#ConnectedAsset").val(null),$("#ConnectedAssetDiv").hide(),$("#ConnectedAsset").prop("disabled",!0),$("#ConnectedAsset").selectpicker("refresh"),$("#Drawer").val(null),$("#DrawerDiv").hide(),$("#Drawer").prop("disabled",!0),$("#SurplusDate").attr("required",!1),$("#SNFnumber").attr("required",!1),$("#SurplusDate").val(null),$("#SNFnumber").val(null),$("#SurplusDateDiv").hide(),$("#SNFnumberDiv").hide())}$(document).ready(function(){n()});$("#AssetStatus").change(function(){$("#StatusId").val($("#AssetStatus").val());$("#Location").prop("disabled",!1);$("#Building").prop("disabled",!1);$("#Room").prop("disabled",!1);n()})},n.ConnectedAsset=function(n){function t(){if($("#ConnectedAsset").val()>0){$("#AssetStatus").prop("disabled",!0);$("#AssignedUser").prop("disabled",!0);$("#AssignedUser").selectpicker("refresh");$("#Location").prop("disabled",!0);$("#Building").prop("disabled",!0);$("#Room").prop("disabled",!0);var t={};t.url=n+"?assetId="+$("#ConnectedAsset").val();t.type="POST";t.datatype="json";t.contentType="application/json";t.success=function(n){$("#AssignedUser").val(null);$("#AssignedUserId").val(null);$("#AssignedUser").selectpicker("refresh");$("#Location").val(null);$("#LocationId").val(null);$("#Location").val(n.LocationId);$("#LocationId").val(n.LocationId);$("#BuildingId").val(null);$("#Building").val(null);$("#RoomId").val(null);$("#Room").val(null);$("#AssetStatus").val(n.StatusId);$("#StatusId").val(n.StatusId);n.Status.Name=="Assigned"?($("#AssignedUser").val(n.AssignedUserId),$("#AssignedUserId").val(n.AssignedUserId),$("#AssignedUserDiv").show(),$("#AssignedUser").attr("required",!0)):($("#AssignedUser").val(null),$("#AssignedUserId").val(null),$("#AssignedUserDiv").hide(),$("#AssignedUser").attr("required",!1));$("#AssignedUser").selectpicker("refresh");n.LocationId&&n.BuildingId?($("#Building").append($("<option><\/option>").val(n.Building.Id).html(n.Building.Name)),$("#Building").val(n.BuildingId),$("#BuildingId").val(n.BuildingId)):$("#Building").append($("<option><\/option>").val(null).html("Please Select"));n.LocationId&&n.BuildingId&&n.RoomId?($("#Room").append($("<option><\/option>").val(n.Room.Id).html(n.Room.Name)),$("#Room").val(n.RoomId),$("#RoomId").val(n.RoomId)):$("#Room").append($("<option><\/option>").val(null).html("Please Select"))};t.error=function(){console.log("Error Getting Connected Asset!!")};$.ajax(t)}else $("#AssetStatus").prop("disabled",!1),$("#AssetStatus option:selected").text()!="Assigned"&&$("#AssignedUser").attr("required",!1),$("#StatusId").val($("#AssetStatus").val()),$("#AssignedUser").prop("disabled",!1),$("#AssignedUser").selectpicker("refresh"),$("#Location").prop("disabled",!1),$("#Building").prop("disabled",!1),$("#Room").prop("disabled",!1)}$(document).ready(function(){$("#ConnectedAsset").val()&&($("#AssetStatus").prop("disabled",!0),$("#AssignedUser").prop("disabled",!0),$("#AssignedUser").selectpicker("refresh"),$("#Location").prop("disabled",!0),$("#Building").prop("disabled",!0),$("#Room").prop("disabled",!0))});$("#ConnectedAsset").change(function(){t()})},n.GetBulkAssets=function(n){$("#GetAssets").click(function(){$("#AssetBulkForm #DateReceived").val(null);$("#AssetBulkForm #Status").val(null);$("#AssetBulkForm #SurplusDate").val(null);$("#AssetBulkForm #SNFnumber").val(null);$("#AssetBulkForm #AssignedUser").val(null);$("#AssetBulkForm #AssignedAsset").val(null);$("#AssetBulkForm #Location").val(null);$("#AssetBulkForm #Building").val(null);$("#AssetBulkForm #Room").val(null);$("#AssetBulkForm #Notes").val(null);$("#AssetBulkForm #SurplusDate").attr("required",!1);$("#AssetBulkForm #SNFnumber").attr("required",!1);$("#AssetBulkForm #Location").attr("required",!1);$("#AssetBulkForm #AssignedAsset").attr("required",!1);$("#AssetBulkForm #AssignedUser").attr("required",!1);$("#AssetBulkForm #SurplusDateDiv").hide();$("#AssetBulkForm #SNFnumberDiv").hide();var t=[];$(".checkSingle").each(function(){this.checked&&t.push(this.value)});t.length>0&&$.ajax({type:"GET",url:n+"?assets="+t,success:function(n){var i=JSON.parse(n),t;$("#AssetBulkForm #AssetIds").val(i.AssetIds);$("#AssetBulkForm #DateReceived").val(null);$("#AssetBulkForm #Status").empty();$("#AssetBulkForm #Status").append($("<option><\/option>").val(null).html("Please Select"));$("#AssetBulkForm #SurplusDate").val(null);$("#AssetBulkForm #SNFnumber").val(null);$("#AssetBulkForm #AssignedUser").empty();$("#AssetBulkForm #AssignedUser").append($("<option><\/option>").val(null).html("Please Select"));$("#AssetBulkForm #AssignedAsset").empty();$("#AssetBulkForm #AssignedAsset").append($("<option><\/option>").val(null).html("Please Select"));$("#AssetBulkForm #Location").empty();$("#AssetBulkForm #Location").append($("<option><\/option>").val(null).html("Please Select"));$("#AssetBulkForm #Building").empty();$("#AssetBulkForm #Building").append($("<option><\/option>").val(null).html("Please Select"));$("#AssetBulkForm #Room").empty();$("#AssetBulkForm #Room").append($("<option><\/option>").val(null).html("Please Select"));$("#AssetBulkForm #Notes").val(null);var r=i.Statuses,u=i.Users,f=i.ComputerTypeAssets,e=i.Locations;for(t=0;t<r.length;t++)$("#AssetBulkForm #Status").append($("<option><\/option>").val(r[t].Id).html(r[t].Name));for(t=0;t<u.length;t++)$("#AssetBulkForm #AssignedUser").append($("<option><\/option>").val(u[t].UserId).html(u[t].Name));for(t=0;t<f.length;t++)$("#AssetBulkForm #AssignedAsset").append($("<option><\/option>").val(f[t].Id).html(f[t].SerialandAssignedUser));for(t=0;t<e.length;t++)$("#AssetBulkForm #Location").append($("<option><\/option>").val(e[t].Id).html(e[t].DisplayName));$("#AssetBulkForm #Building").val(null);$("#AssetBulkForm #Room").val(null);$("#AssetBulkForm #AssignedUser").selectpicker("refresh");$("#AssetBulkForm #AssignedAsset").selectpicker("refresh");$("#AssetBulkForm #Serialized").val($("#AssetBulkForm").serialize());$("#AssetBulkModalLabel").html($("#GetAssets").data("type"));$("#AssetBulkModalCount").html("&nbsp Total Items: "+i.AssetCount);$("#AssetBulkModal").modal({})},error:function(){}})});$("#AssetBulkForm #AssignedUser").change(function(){$("#AssetBulkForm #AssignedUserId").val($("#AssignedUser").val())});$("#AssetBulkForm :input").change(function(){$("#AssetBulkForm").data("changed",!1);$("#AssetBulkForm #EditAssets").prop("disabled",!0);$("#AssetBulkForm :input:not([type=hidden])").each(function(){$(this,"input, textarea, select").val()&&($("#AssetBulkForm").data("changed",!0),$("#AssetBulkForm #EditAssets").prop("disabled",!1))})});$("#AssetBulkForm :input").on("keyup",function(){$("#AssetBulkForm").data("changed",!1);$("#AssetBulkForm #EditAssets").prop("disabled",!0);$("#AssetBulkForm :input:not([type=hidden])").each(function(){$(this,"input, textarea, select").val()&&($("#AssetBulkForm").data("changed",!0),$("#AssetBulkForm #EditAssets").prop("disabled",!1))})});$("#AssetBulkForm #Status").change(function(){$("#AssetBulkForm #AssignedUserId").val(null);$("#AssetBulkForm #AssignedUser").val(null);$("#AssetBulkForm #AssignedUser").val(null);$("#AssignedUserDiv").hide();$("#AssetBulkForm #AssignedUser").prop("disabled",!0);$("#AssetBulkForm #AssignedUser").selectpicker("refresh");$("#AssetBulkForm #AssignedAsset").val(null);$("#AssignedAssetDiv").hide();$("#AssetBulkForm #AssignedAsset").prop("disabled",!0);$("#AssetBulkForm #AssignedAsset").selectpicker("refresh");$("#AssetBulkForm #SurplusDate").attr("required",!1);$("#AssetBulkForm #SNFnumber").attr("required",!1);$("#AssetBulkForm #SurplusDate").val(null);$("#AssetBulkForm #SNFnumber").val(null);$("#AssetBulkForm #SurplusDateDiv").hide();$("#AssetBulkForm #SNFnumberDiv").hide();$("#AssetBulkForm #Status option:selected").val()>0?$("#AssetBulkForm #Status option:selected").text()=="Available"?($("#AssetBulkForm #AssignedUserId").val(null),$("#AssetBulkForm #AssignedUser").val(null),$("#AssetBulkForm #AssignedAsset").val(null),$("#AssetBulkForm #Location").val(null),$("#AssetBulkForm #Building").val(null),$("#AssetBulkForm #Room").val(null),$("#AssignedUserDiv").hide(),$("#AssetBulkForm #AssignedUser").prop("disabled",!0),$("#AssetBulkForm #AssignedUser").selectpicker("refresh"),$("#AssignedAssetDiv").hide(),$("#AssetBulkForm #AssignedAsset").prop("disabled",!0),$("#AssetBulkForm #AssignedAsset").selectpicker("refresh"),$("#AssetBulkForm #AssignedAsset").attr("required",!1),$("#AssetBulkForm #AssignedUser").attr("required",!1)):$("#AssetBulkForm #Status option:selected").text()=="Assigned"?($("#AssignedUserDiv").show(),$("#AssetBulkForm #AssignedUser").prop("disabled",!1),$("#AssetBulkForm #AssignedUser").selectpicker("refresh"),$("#AssetBulkForm #AssignedAsset").val(null),$("#AssetBulkForm #Location").val(null),$("#AssetBulkForm #Building").val(null),$("#AssetBulkForm #Room").val(null),$("#AssignedAssetDiv").hide(),$("#AssetBulkForm #AssignedAsset").prop("disabled",!0),$("#AssetBulkForm #AssignedAsset").selectpicker("refresh"),$("#AssetBulkForm #AssignedUser").attr("required",!0),$("#AssetBulkForm #AssignedAsset").attr("required",!1)):$("#AssetBulkForm #Status option:selected").text()=="Shared"?($("#AssignedAssetDiv").show(),$("#AssetBulkForm #AssignedAsset").prop("disabled",!1),$("#AssetBulkForm #AssignedAsset").selectpicker("refresh"),$("#AssetBulkForm #AssignedUserId").val(null),$("#AssetBulkForm #AssignedUser").val(null),$("#AssetBulkForm #Location").val(null),$("#AssetBulkForm #Building").val(null),$("#AssetBulkForm #Room").val(null),$("#AssignedUserDiv").hide(),$("#AssetBulkForm #AssignedUser").prop("disabled",!0),$("#AssetBulkForm #AssignedUser").selectpicker("refresh"),$("#AssetBulkForm #AssignedAsset").attr("required",!0),$("#AssetBulkForm #AssignedUser").attr("required",!1)):$("#AssetBulkForm #Status option:selected").text()=="Surplus"?($("#AssetBulkForm #SurplusDate").attr("required",!0),$("#AssetBulkForm #SNFnumber").attr("required",!0),$("#AssetBulkForm #SurplusDateDiv").show(),$("#AssetBulkForm #SNFnumberDiv").show()):($("#AssetBulkForm #AssignedUserId").val(null),$("#AssetBulkForm #AssignedUser").val(null),$("#AssetBulkForm #AssignedAsset").val(null),$("#AssetBulkForm #Location").val(null),$("#AssetBulkForm #Building").val(null),$("#AssetBulkForm #Room").val(null),$("#AssignedUserDiv").hide(),$("#AssetBulkForm #AssignedUser").prop("disabled",!0),$("#AssetBulkForm #AssignedUser").selectpicker("refresh"),$("#AssignedAssetDiv").hide(),$("#AssetBulkForm #AssignedAsset").prop("disabled",!0),$("#AssetBulkForm #AssignedAsset").selectpicker("refresh"),$("#AssetBulkForm #AssignedAsset").attr("required",!1),$("#AssetBulkForm #AssignedUser").attr("required",!1),$("#AssetBulkForm #SurplusDate").attr("required",!1),$("#AssetBulkForm #SNFnumber").attr("required",!1),$("#AssetBulkForm #SurplusDate").val(null),$("#AssetBulkForm #SNFnumber").val(null),$("#AssetBulkForm #SurplusDateDiv").hide(),$("#AssetBulkForm #SNFnumberDiv").hide()):($("#AssignedUserDiv").show(),$("#AssetBulkForm #AssignedUser").prop("disabled",!1),$("#AssetBulkForm #AssignedUser").selectpicker("refresh"),$("#AssignedAssetDiv").show(),$("#AssetBulkForm #AssignedAsset").prop("disabled",!1),$("#AssetBulkForm #AssignedAsset").selectpicker("refresh"),$("#AssetBulkForm #AssignedAsset").attr("required",!1),$("#AssetBulkForm #AssignedUser").attr("required",!1),$("#AssetBulkForm #SurplusDate").attr("required",!1),$("#AssetBulkForm #SNFnumber").attr("required",!1),$("#AssetBulkForm #SurplusDate").val(null),$("#AssetBulkForm #SNFnumber").val(null),$("#AssetBulkForm #SurplusDateDiv").hide(),$("#AssetBulkForm #SNFnumberDiv").hide())})},n.EditBulkAssets=function(n){$("#btn-submit").click(function(){var i=$("#AssetBulkForm").serialize(),t=!1;$("#AssetBulkForm").data("changed")&&(t=!0);t&&$.ajax({type:"POST",url:n,data:i,success:function(n){n.IsUpdated?($("#AssetBulkModal").modal("hide"),window.location.reload()):($("#AssetBulkModal").modal("hide"),window.location.reload())}})})},n}({});